@import "tailwindcss";

/* Class-based dark mode (add .dark to a parent, e.g. #root) */
@custom-variant dark (&:where(.dark, .dark *));

/*
  Theme:
  Design tokens live in @theme; light values here, .dark overrides below.
  Component classes use var(--color-*) so one token change updates everywhere.
*/
@theme inline {
  /* Secondary/neutral buttons (nav header, FAB sub-actions) */
  --color-btn-surface: var(--color-gray-400);
  --color-btn-surface-hover: var(--color-gray-300);
  --color-btn-on: var(--color-gray-800);
  --color-btn-ring: var(--color-gray-600);
  /* Main FAB (primary action) */
  --color-fab-main-surface: var(--color-gray-600);
  --color-fab-main-surface-hover: var(--color-gray-500);
  --color-fab-main-on: var(--color-gray-100);
  --color-fab-main-ring: var(--color-gray-400);
  /* Alt FAB (e.g. settings) */
  --color-fab-alt-surface: var(--color-gray-500);
  --color-fab-alt-surface-hover: var(--color-gray-400);
  --color-fab-alt-on: var(--color-gray-100);
  --color-fab-alt-ring: var(--color-gray-400);
  /* Shadows that change in dark (optional override) */
  --shadow-fab-sub: var(--shadow-lg);
  --shadow-fab-alt: var(--shadow-md);
}

/* Dark: override semantic tokens when .dark is on a parent (e.g. #root) */
.dark {
  --color-btn-surface: var(--color-gray-600);
  --color-btn-surface-hover: var(--color-gray-500);
  --color-btn-on: var(--color-gray-200);
  --color-btn-ring: var(--color-gray-400);
  --color-fab-main-surface: var(--color-gray-700);
  --color-fab-main-surface-hover: var(--color-gray-600);
  --color-fab-main-on: var(--color-gray-200);
  --color-fab-main-ring: var(--color-gray-300);
  --color-fab-alt-surface: var(--color-gray-600);
  --color-fab-alt-surface-hover: var(--color-gray-500);
  --color-fab-alt-on: var(--color-gray-200);
  --color-fab-alt-ring: var(--color-gray-300);
  /* Icon fill when parent doesnâ€™t set color; light uses currentColor via fallback */
  --color-icon-fill: var(--color-gray-200);
  --shadow-fab-sub: var(--shadow-xl);
  --shadow-fab-alt: var(--shadow-lg);
}

/* Base element defaults */
@layer base {
  html,
  body {
    overflow: hidden;
    height: 100%;
    margin: 0;
    overscroll-behavior: none;
  }

  @media (max-width: 768px) {
    input,
    select,
    textarea {
      font-size: 16px;
    }
  }

  #root {
    display: flex;
    flex-direction: column;
    overflow: hidden;
    height: 100vh;
    min-height: 0;
    user-select: none;
    cursor: default;
  }

  input,
  select,
  textarea {
    user-select: text;
    cursor: text;
  }
  input[type="number"],
  input[type="checkbox"],
  input[type="color"],
  input[type="radio"],
  select {
    cursor: pointer;
  }
  input:disabled,
  select:disabled,
  textarea:disabled {
    cursor: not-allowed;
  }
}

/* Component classes: theme vars (var(--color-*)); dark via .dark token overrides */
@layer components {
  .icon-svg {
    width: 100%;
    height: 100%;
    fill: var(--color-icon-fill, currentColor);
    flex-shrink: 0;
    vertical-align: middle;
  }

  .btn-nav-header {
    min-height: 44px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-md, 0.375rem);
    background-color: var(--color-btn-surface);
    color: var(--color-btn-on);
    transition: background-color, color;
    touch-action: manipulation;
    cursor: pointer;
    outline: none;
  }
  .btn-nav-header:hover {
    background-color: var(--color-btn-surface-hover);
  }
  .btn-nav-header:focus-visible {
    box-shadow: 0 0 0 1px var(--color-btn-ring);
  }

  .fab-sub {
    min-height: 48px;
    padding-left: 1rem;
    padding-right: 1rem;
    border-radius: 9999px;
    background-color: var(--color-btn-surface);
    color: var(--color-btn-on);
    box-shadow: var(--shadow-fab-sub);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: background-color, color, box-shadow;
    touch-action: manipulation;
    cursor: pointer;
    outline: none;
  }
  @media (width >= 40rem) {
    .fab-sub {
      min-height: 44px;
      padding-left: 1.25rem;
      padding-right: 1.25rem;
    }
  }
  .fab-sub:hover {
    background-color: var(--color-btn-surface-hover);
  }
  .fab-sub:focus-visible {
    box-shadow: 0 0 0 1px var(--color-btn-ring), var(--shadow-fab-sub);
  }

  .fab-main {
    min-height: 56px;
    min-width: 56px;
    border-radius: 9999px;
    background-color: var(--color-fab-main-surface);
    color: var(--color-fab-main-on);
    box-shadow: var(--shadow-xl);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background-color, color, transform 0.2s;
    touch-action: manipulation;
    cursor: pointer;
    outline: none;
  }
  @media (width >= 40rem) {
    .fab-main {
      min-height: 60px;
      min-width: 60px;
    }
  }
  .fab-main:hover {
    background-color: var(--color-fab-main-surface-hover);
  }
  .fab-main:focus-visible {
    box-shadow: 0 0 0 1px var(--color-fab-main-ring), var(--shadow-xl);
  }

  .fab-settings {
    min-height: 44px;
    min-width: 44px;
    border-radius: 9999px;
    background-color: var(--color-fab-alt-surface);
    color: var(--color-fab-alt-on);
    box-shadow: var(--shadow-fab-alt);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background-color, color, box-shadow;
    touch-action: manipulation;
    cursor: pointer;
    outline: none;
  }
  @media (width >= 40rem) {
    .fab-settings {
      min-height: 48px;
      min-width: 48px;
    }
  }
  .fab-settings:hover {
    background-color: var(--color-fab-alt-surface-hover);
  }
  .fab-settings:focus-visible {
    box-shadow: 0 0 0 1px var(--color-fab-alt-ring), var(--shadow-fab-alt);
  }
}
